profiles {
  apptainer {
    process.containerEngine = 'apptainer'
    singularity.enabled = true
    cacheDir = '/mnt/nrdstor/richlab/aliciarich/.apptainer/cache'
    tempDir  = '/mnt/nrdstor/richlab/aliciarich/.apptainer/tmp'
  }
  singularity {
    process.containerEngine = 'singularity'
    enabled  = true
    cacheDir = '/mnt/nrdstor/richlab/aliciarich/.apptainer/cache'
    tempDir  = '/mnt/nrdstor/richlab/aliciarich/.apptainer/tmp'
  }
  docker {
    process.containerEngine = 'docker'
    docker.enabled = true
  }
  conda {
    conda.enabled = true
  }
}

profiles {
  // Use Apptainer CLI but Nextflow still reads singularity{...} settings
  apptainer {
    process.containerEngine = 'apptainer'
    singularity {
      enabled = true
      cacheDir = '/mnt/nrdstor/richlab/aliciarich/.apptainer/cache'
      tempDir  = '/mnt/nrdstor/richlab/aliciarich/.apptainer/tmp'
    }
    // pass cache/tmp env through if you set them in the shell
    envWhitelist = ['APPTAINER_CACHEDIR','APPTAINER_TMPDIR','SINGULARITY_CACHEDIR','SINGULARITY_TMPDIR']
  }

  // Classic Singularity CLI
  singularity {
    process.containerEngine = 'singularity'
    singularity {
      enabled = true
      cacheDir = '/mnt/nrdstor/richlab/aliciarich/.apptainer/cache'
      tempDir  = '/mnt/nrdstor/richlab/aliciarich/.apptainer/tmp'
    }
    envWhitelist = ['APPTAINER_CACHEDIR','APPTAINER_TMPDIR','SINGULARITY_CACHEDIR','SINGULARITY_TMPDIR']
  }

  docker {
    process.containerEngine = 'docker'
    docker.enabled = true
  }

  conda {
    conda.enabled = true
  }
}